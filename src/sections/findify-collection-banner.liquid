{% if canonical_url contains 'search-results' %}
  {% assign entity = page %}
{% else %}
  {% assign entity = collection %}
{% endif %}

{% assign banner_copy = entity.metafields.custom_fields["banner_copy"] %}
{% assign title_tag = entity.metafields.custom_fields["title_tag"] %}
{% assign collection_classes = '' %}

{% if entity.metafields.custom_fields["banner_title"] != blank %}
  {% assign banner_title = entity.metafields.custom_fields["banner_title"] %}
{% else %}
  {% assign banner_title = entity.title %}
{% endif %}

{% if title_tag == blank %}
  {% assign title_tag = 'h1' %}
{% endif %}

<div class="collection-banner findify-collection-banner layout-content-wrapper {{ collection_classes }}" data-section-id="{{ section.id }}" data-section-type="collection-banner">
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-xl-22 col-lg-22 col-md-20 col-sm-22 col-22 collection-banner-inner-wrapper">
        <div>
          <{{title_tag}} class="collection-banner__title text-left h1">{{ banner_title }}</{{title_tag}}>
          {% if banner_copy != blank %}
            <div class="collection-banner__content text-left p2">{{ banner_copy }}</div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Findify Collection Banner",
  "presets": [{
    "category": "Collection",
    "name": "Findify Collection Banner"
  }],
  "enabled_on": {
    "templates": ["collection"]
  }
}
{% endschema %}
