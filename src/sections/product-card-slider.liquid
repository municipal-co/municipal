{% assign s = section.settings %}

<div id="link-card-slider-{{section.id}}" class="card-slider" data-section-type="product-card-slider" data-section-id="{{section.id}}">
  <style>
    #link-card-slider-{{section.id}} {
      background-color: {{s.bg_color}};
    }

    #link-card-slider-{{section.id}} {
      color: {{s.text_color}};
    }

  </style>
  <div class="container-fluid">
    <div class="row">
      <div class="card-slider__heading">
        <div class="card-slider__info-container">
          {% if s.title != blank %}
            <{{s.title_tag}} class="card-slider__title h2">{{ s.title }}</{{s.title_tag}}>
          {% endif %}

          {% if s.heading_copy %}
          <p class="card-slider__copy p3">
            {{ s.heading_copy }}
          </p>
          {% endif %}
        </div>
        {% if s.heading_cta_title != blank and s.heading_cta_url != blank %}
          <div class="card-slider__cta-container">
            <a class="btn-link card-slider__button" href="{{s.heading_cta_url}}">{{s.heading_cta_title}}</a>
          </div>
        {% endif %}
      </div>
    </div>
    <div class="row card-slider__slider" data-card-slider>
      <div class="swiper-wrapper">
        {% for block in section.blocks %}
          {% assign bs = block.settings %}
          <div class="swiper-slide" data-card-slide {{block.shopify_attributes}}>
            {% render 'product-card'
              card_product: all_products[bs.card_product],
              color: bs.selected_color
            %}
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
	"name": "Product Cards Carousel",
	"settings": [{
			"type": "header",
			"content": "Layout"
		},
		{
			"type": "color",
			"id": "text_color",
			"label": "Text Color",
			"default": "#ffffff"
		},
		{
			"type": "color",
			"id": "bg_color",
			"label": "Background Color",
			"default": "#393d49"
		},
		{
			"type": "select",
			"id": "title_tag",
			"label": "Section Title Tag",
			"options": [{
					"value": "h1",
					"label": "h1"
				},
				{
					"value": "h2",
					"label": "h2"
				},
				{
					"value": "h3",
					"label": "h3"
				},
				{
					"value": "h4",
					"label": "h4"
				},
				{
					"value": "h5",
					"label": "h5"
				},
				{
					"value": "h6",
					"label": "h6"
				}
			],
			"default": "h2",
			"info": "This will not change the text styling (font size)"
		},
		{
			"type": "header",
			"content": "Section Content"
		},
		{
			"type": "text",
			"id": "title",
			"label": "Title",
			"default": "Main Title"
		},
		{
			"type": "textarea",
			"id": "heading_copy",
			"label": "Heading Copy",
			"default": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Esse et explicabo iste deserunt corrupti sed perspiciatis hic. "
		},
		{
			"type": "text",
			"id": "heading_cta_title",
			"label": "Heading CTA Title",
			"default": "CTA Title"
		},
		{
			"type": "url",
			"id": "heading_cta_url",
			"label": "Heading CTA URL"
		}
	],
  "blocks": [
    {
     "name": "Card",
     "type": "link-card",
      "settings": [
        {
        "type": "product",
        "id": "card_product",
        "label": "Product",
        "info": "Defines the product to be displayed on the card"
        },
        {
          "type": "text",
          "id": "selected_color",
          "label": "Selected color",
          "info": "Defines the color to be used as default when the card loads, this text should match exactly with the variant color name"
        }
      ]
    }
  ],
 "presets": [
   {
     "category": "layout",
     "name":"Product card slider"
   }
 ]
}
{% endschema %}